Change "library" to "contract"
Replace all instances of "internal" with "public" except for the "split" function which uses an experimental feature and is ignored for the tests.
